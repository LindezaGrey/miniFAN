{"version":"V2.0","versionNumber":"V2.2.6","type":"atoms3-lite","components":[],"resources":[{"hardware":["pwm","hardware_button","hardware_pin_button","rgb","ir"]}],"units":[],"hats":[],"bases":[],"i2cs":[],"blockly":"<variables><variable id=\"h_=wlHiNY/EOGD:Bf88X\">server</variable><variable id=\"(N:,U4bC-=UXO4YmC1km\">client_handle</variable><variable id=\"[/dY;4,7`gOwCRQgmQyi\">received_payload</variable><variable id=\"xS,y^nSz3Co8_`obU4r8\">char_uuid</variable><variable id=\"=ftu+thT#B|Pqf.dRQqO\">characteristics</variable><variable id=\")#tiF~FuW{i!f{)?}=5G\">service_uuid</variable></variables><block type=\"basic_on_loop\" id=\"loop_block\" deletable=\"false\" x=\"770\" y=\"-90\"><mutation isUpdate=\"true\"></mutation><field name=\"UPDATEOP\">true</field><statement name=\"FUNC\"><block type=\"system_m5_update\" id=\"system_m5_update\"></block></statement></block><block type=\"execute_code_import\" id=\"{YvcQE*_j9$=.eyn,pAh\" x=\"50\" y=\"-10\"><field name=\"CODE\">from bluetooth import UUID</field></block><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"50\" y=\"50\"><mutation isBegin=\"true\"></mutation><field name=\"UPDATEOP\">true</field><statement name=\"FUNC\"><block type=\"system_m5_begin\" id=\"system_m5_begin\"><next><block type=\"rgb_init\" id=\"+G1_.VBgm5@gp~pJyDuB\"><mutation mode=\"builtin\"></mutation><field name=\"MODE\">builtin</field><next><block type=\"m5ble_init\" id=\"o|pml3EKN;l0g-kXg!wV\"><value name=\"VALUE\"><shadow type=\"text\" id=\"L+b]~7CO--Az}3X3R]=q\"><field name=\"TEXT\">miniFAN</field></shadow></value><next><block type=\"text_print\" id=\",Oo+5HJa^mQnBy..?~76\"><value name=\"TEXT\"><shadow type=\"text\" id=\"-[T!nD4lD76xI!P]Ueq9\"><field name=\"TEXT\">init done</field></shadow></value><next><block type=\"variables_set\" id=\"*zfij?j,h3q?4Oh@fR6K\"><field name=\"VAR\" id=\"=ftu+thT#B|Pqf.dRQqO\">characteristics</field><value name=\"VALUE\"><block type=\"lists_create_with\" id=\"sRMm`rM;^!5FoDSs3o7z\"><mutation items=\"0\"></mutation></block></value><next><block type=\"variables_set\" id=\"I;tBONb_X61nE4#]Nc1D\"><field name=\"VAR\" id=\")#tiF~FuW{i!f{)?}=5G\">service_uuid</field><value name=\"VALUE\"><block type=\"text\" id=\"%vE(}vXxev~Ed]C%X%rF\"><field name=\"TEXT\">25081992-83f3-4a4c-8452-30964a5354ae</field></block></value><next><block type=\"variables_set\" id=\"OlUa6]Ycakm:D9QcEhJ]\"><field name=\"VAR\" id=\"xS,y^nSz3Co8_`obU4r8\">char_uuid</field><value name=\"VALUE\"><block type=\"text\" id=\"3:k=lx=vK1VR#9?5iG+0\"><field name=\"TEXT\">25081992-0c61-4d56-8c68-d2e290eaf042</field></block></value><next><block type=\"lists_setIndex\" id=\"N:_5%:$4*T7AWOa*~A5g\"><mutation at=\"false\"></mutation><field name=\"MODE\">INSERT</field><field name=\"WHERE\">FIRST</field><value name=\"LIST\"><block type=\"variables_get\" id=\".%K1A`kZaiVO66nI|gm}\"><field name=\"VAR\" id=\"=ftu+thT#B|Pqf.dRQqO\">characteristics</field></block></value><value name=\"TO\"><block type=\"m5ble_server_create_characteristic\" id=\"/PnH+~=J!ox[OY.Hbj@-\"><value name=\"UUID\"><block type=\"variables_get\" id=\"!|[MoRf;HIWpZ@[%f3G^\"><field name=\"VAR\" id=\"xS,y^nSz3Co8_`obU4r8\">char_uuid</field></block></value><value name=\"READ\"><shadow type=\"m5ble_switch_option\" id=\"uu7%vjzis^^8dpNC:PC8\"><field name=\"OPTION\">True</field></shadow></value><value name=\"NOTIFY\"><shadow type=\"m5ble_switch_option\" id=\"4RXM);x!5LPw:(HomNrZ\"><field name=\"OPTION\">True</field></shadow></value><value name=\"WRITE\"><shadow type=\"m5ble_switch_option\" id=\"~X[9g_FS`b,*EUOLs%r[\"><field name=\"OPTION\">True</field></shadow></value></block></value><next><block type=\"m5ble_server_add_service\" id=\"z8~5T[J=?K=u=20~h`Xr\"><value name=\"UUID\"><block type=\"variables_get\" id=\"2jSXv(Su]-dD6y6)?E]e\"><field name=\"VAR\" id=\")#tiF~FuW{i!f{)?}=5G\">service_uuid</field></block></value><value name=\"LIST\"><block type=\"variables_get\" id=\"nqb]=By/m1VD?PP|1gGS\"><field name=\"VAR\" id=\"=ftu+thT#B|Pqf.dRQqO\">characteristics</field></block></value><next><block type=\"m5ble_server_start\" id=\"eLUO5,^:r;f{uv,P[!x0\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"%v~-Bq*2W65dFshrrMg{\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">500000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"m5ble_server_on_connected\" id=\"Ns]Kgy1hXr3kPBRp:Y!x\" x=\"890\" y=\"170\"><value name=\"SERVER\"><block type=\"variables_get\" id=\"=FgMr}=d3@YxRKFwc.-f\"><field name=\"VAR\" id=\"h_=wlHiNY/EOGD:Bf88X\">server</field></block></value><value name=\"HANDLE\"><block type=\"variables_get\" id=\"2$GrJ3j;uq^iCEAU=;;u\"><field name=\"VAR\" id=\"(N:,U4bC-=UXO4YmC1km\">client_handle</field></block></value><statement name=\"FUNC\"><block type=\"text_print\" id=\"Sb%$DtUdPk*eSrO6ZD1|\"><value name=\"TEXT\"><shadow type=\"text\" id=\"1~$iM(UBFq%#kqS.!r6@\"><field name=\"TEXT\">connected</field></shadow></value></block></statement></block><block type=\"m5ble_server_on_disconnected\" id=\"@wHU.+=B26)bg`=Rd2Jp\" x=\"890\" y=\"330\"><value name=\"SERVER\"><block type=\"variables_get\" id=\"LF,]`_J~5kBIO,hfe_/-\"><field name=\"VAR\" id=\"h_=wlHiNY/EOGD:Bf88X\">server</field></block></value><value name=\"HANDLE\"><block type=\"variables_get\" id=\"[V(~QGLyh15-.{3]i=[*\"><field name=\"VAR\" id=\"(N:,U4bC-=UXO4YmC1km\">client_handle</field></block></value><statement name=\"FUNC\"><block type=\"text_print\" id=\"OFjhI-{.Ge=v@,j,U_-0\"><value name=\"TEXT\"><shadow type=\"text\" id=\"$tcW)uE)VZjUgtFg*3Wx\"><field name=\"TEXT\">disconnected</field></shadow></value></block></statement></block><block type=\"m5ble_server_on_receive\" id=\"2(NKVo[U[2?xR15X^7+F\" x=\"912\" y=\"475\"><value name=\"SERVER\"><block type=\"variables_get\" id=\"H;x8X{;^y4HQ#6Y%[b~x\"><field name=\"VAR\" id=\"h_=wlHiNY/EOGD:Bf88X\">server</field></block></value><value name=\"HANDLE\"><block type=\"variables_get\" id=\"m%=Eh_jew2sn7T{i`{%D\"><field name=\"VAR\" id=\"(N:,U4bC-=UXO4YmC1km\">client_handle</field></block></value><statement name=\"FUNC\"><block type=\"text_print\" id=\"D!?U9!=BFIZ#)x!QNH+J\"><value name=\"TEXT\"><shadow type=\"text\" id=\"+KXh,#pch1-/R:]r2.(;\"><field name=\"TEXT\">received data</field></shadow></value><next><block type=\"variables_set\" id=\",5/=L(x7)OZfXPV*71)f\"><field name=\"VAR\" id=\"[/dY;4,7`gOwCRQgmQyi\">received_payload</field><value name=\"VALUE\"><block type=\"text_decode_str\" id=\"MiM`}HCi.`++jWfIG^#X\"><value name=\"VALUE\"><block type=\"m5ble_handle_read_all\" id=\"305}9q%^g#ppm?imdlhb\"><value name=\"HANDLE\"><block type=\"variables_get\" id=\"l.H)yrglo5mDw7tJ:%-*\"><field name=\"VAR\" id=\"(N:,U4bC-=UXO4YmC1km\">client_handle</field></block></value><value name=\"CHAR_UUID\"><shadow type=\"text\" id=\"Z+FD)_{y9?cy+oY!q[VP\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"|j~pm},y;l]GB:^_gnFp\"><field name=\"VAR\" id=\"xS,y^nSz3Co8_`obU4r8\">char_uuid</field></block></value></block></value></block></value><next><block type=\"controls_if\" id=\"CJf:.v[3d6HcYr;([m?g\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"OusC.W?Vqzj;Q%aJ;B}~\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"A/n@Ptsw{0)C$YgIM$lP\"><field name=\"VAR\" id=\"[/dY;4,7`gOwCRQgmQyi\">received_payload</field></block></value><value name=\"B\"><block type=\"text\" id=\")a_(BOePz`!;lA#J2(P:\"><field name=\"TEXT\">ON</field></block></value></block></value><statement name=\"DO0\"><block type=\"rgb_set_brightness\" id=\"UH9=asg,7jWfzl+cx2X/\"><field name=\"NAME\">rgb</field><value name=\"BRIGHTNESS\"><shadow type=\"math_slider\" id=\"2Y::71-UYj;iL`rEo$|b\"><mutation max=\"100\" min=\"0\" step=\"1\" precision=\"1\"></mutation><field name=\"NUM\">80</field></shadow></value></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"uj~5*R9S#_*wPxp,`3C1\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"Ho@WS;YIS1e5COa||3,a\"><field name=\"VAR\" id=\"[/dY;4,7`gOwCRQgmQyi\">received_payload</field></block></value><value name=\"B\"><block type=\"text\" id=\"|GG8@-v@yd0sS@fmh~BL\"><field name=\"TEXT\">OFF</field></block></value></block></value><statement name=\"DO1\"><block type=\"rgb_set_brightness\" id=\"3I0K2=S;qy9B_98;Se4F\"><field name=\"NAME\">rgb</field><value name=\"BRIGHTNESS\"><shadow type=\"math_slider\" id=\"kP.~`uQ9Wb6BF6JapW,?\"><mutation max=\"100\" min=\"0\" step=\"1\" precision=\"1\"></mutation><field name=\"NUM\">10</field></shadow></value></block></statement><next><block type=\"rgb_fill_color\" id=\"ZT-`}s4(a_%K(#39_gNX\"><field name=\"NAME\">rgb</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"g(Zv)3P})a9*J:)i9fHF\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#ffff66</field></block></value><next><block type=\"time_sleep_second\" id=\"{gC_*meLjj2.{k00%;92\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\":Ipf$_FbnQ[u7$A%?xba\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><next><block type=\"rgb_fill_color\" id=\"4?7$q$dj^pr8-BF2{xg?\"><field name=\"NAME\">rgb</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"6WFXkDeEhbf;E0+RsVBm\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#33cc00</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"button_callback\" id=\"j,s7?hHV[M`(E)IHpT3`\" x=\"150\" y=\"710\"><field name=\"NAME\">BtnA</field><field name=\"TYPE\">WAS_CLICKED</field><statement name=\"FUNC\"><block type=\"execute_code\" id=\"q=riVFLlT||m{s(}8o^u\"><field name=\"CODE\">global ble, client_handle, char_uuid&amp;#10;if client_handle:&amp;#10;    handle = ble.server._value_handle_map[UUID(char_uuid)]&amp;#10;    ble._ble.gatts_write(handle, b'kkk')  # client can now read this value&amp;#10;    ble._ble.gatts_notify(client_handle.connect_handle, handle, b'kkk') </field></block></statement></block><block type=\"button_callback\" id=\",W82BYBAd$kkjbGh+{z7\" x=\"150\" y=\"930\"><field name=\"NAME\">BtnA</field><field name=\"TYPE\">WAS_DOUBLECLICKED</field><statement name=\"FUNC\"><block type=\"controls_if\" id=\"j`Q=_^LSUkw?azR;Z$?R\"><value name=\"IF0\"><block type=\"variables_get\" id=\"a;?mtWgsMpj[R1i1A3st\"><field name=\"VAR\" id=\"(N:,U4bC-=UXO4YmC1km\">client_handle</field></block></value><statement name=\"DO0\"><block type=\"text_print\" id=\"xg;^pA.[XL*D);s6tzq;\"><value name=\"TEXT\"><shadow type=\"text\" id=\"JK~0WZ;#Sx%2]495|I,e\"><field name=\"TEXT\">killing client...</field></shadow></value><next><block type=\"m5ble_handle_close\" id=\";S]Yhm]R.1yrO(ow+ZnM\"><value name=\"HANDLE\"><block type=\"variables_get\" id=\".H=[KzT!Y|SDv?[?!e.T\"><field name=\"VAR\" id=\"(N:,U4bC-=UXO4YmC1km\">client_handle</field></block></value></block></next></block></statement></block></statement></block>","screen":[],"logicWhenNum":0,"customList":[]}